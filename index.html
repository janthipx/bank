<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banking system (employees)</title>
  <!-- เชื่อมไฟล์ CSS แยก -->
  <link rel="stylesheet" href="style.css">
  <!-- Login Page -->
  <div class="container" id="loginPage">
    <h1>🔑 Banking system (employees)</h1>
    <label>Employee ID</label>
    <input type="text" id="empId" placeholder="Employee ID">
    <label>Password</label>
    <input type="password" id="empPassword" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>

  <!-- Dashboard Menu -->
  <div class="container hidden" id="dashboard">
    <h1>🏦 Banking system - Employee Menu</h1>
    <div class="menu">
      <button onclick="showTransaction('deposit')">💰 Deposit</button>
      <button onclick="showTransaction('withdraw')">💸 Withdraw</button>
      <button onclick="showTransaction('check')">📋 Check Balance</button>
    </div>

    <div id="transactionPage" class="hidden">
      <h2 id="transTitle"></h2>
      <label>Customer ID</label>
      <input type="text" id="custId" placeholder="เช่น 001">
      <div id="amountDiv">
        <label>Amount</label>
        <input type="number" id="amount" placeholder="กรอกจำนวนเงิน">
      </div>
      <button onclick="performTransaction()">Confirm</button>
      <div class="output" id="output">📌 Please enter the transaction details</div>
      <button onclick="backToMenu()" style="background:#6c757d;">🔙 กลับเมนู</button>
    </div>
  </div>

  <script>
    // ข้อมูลพนักงาน
    const employeeAccount = { id: "671621104438", password: "@Fang27" };

    // ข้อมูลลูกค้า mock
    const customers = [
      { id: "671621104438", name: "Janthipa", balance: 5000 },
      { id: "671621104439", name: "Chotika", balance: 12000 },
      { id: "671621104440", name: "Thanakrit", balance: 8000 },
    ];

    let currentTransaction = '';

    // ===== Login =====
    function login() {
      const id = document.getElementById("empId").value;
      const pw = document.getElementById("empPassword").value;

      if(id === employeeAccount.id && pw === employeeAccount.password){
        alert("✅ Employee login successful!");
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("dashboard").classList.remove("hidden");
      } else {
        alert("❌ Employee ID or password is incorrect");
      }
    }

    // ===== Show Transaction Page =====
    function showTransaction(type) {
      currentTransaction = type;
      document.getElementById("transactionPage").classList.remove("hidden");

      const title = document.getElementById("transTitle");
      const amountDiv = document.getElementById("amountDiv");
      const output = document.getElementById("output");
      output.textContent = "📌 Please enter the transaction details";

      if(type === 'deposit'){
        title.textContent = "💰 Deposit";
        amountDiv.style.display = "block";
      } else if(type === 'withdraw'){
        title.textContent = "💸 Withdraw";
        amountDiv.style.display = "block";
      } else if(type === 'check'){
        title.textContent = "📋 Check Balance";
        amountDiv.style.display = "none";
      }
    }

    // ===== Perform Transaction =====
    function performTransaction() {
      const custId = document.getElementById("custId").value;
      const customer = customers.find(c => c.id === custId);
      const output = document.getElementById("output");

      if(!customer){
        output.textContent = "❌ No customers found with this ID.";
        return;
      }

      if(currentTransaction === 'deposit'){
        const amount = Number(document.getElementById("amount").value);
        if(amount <= 0) { output.textContent="⚠️ Please enter a valid amount"; return; }
        customer.balance += amount;
        output.textContent = `💰 Deposited ${amount} Baht to ${customer.name}\nNew Balance: ${customer.balance} Baht`;
      }
      else if(currentTransaction === 'withdraw'){
        const amount = Number(document.getElementById("amount").value);
        if(amount <= 0) { output.textContent="⚠️ Please enter a valid amount"; return; }
        if(customer.balance < amount){
          output.textContent = `⚠️ Insufficient funds for withdrawal (Available: ${customer.balance} Baht)`;
          return;
        }
        customer.balance -= amount;
        output.textContent = `💸 Withdrawn ${amount} Baht from ${customer.name}\nNew Balance: ${customer.balance} Baht`;
      }
      else if(currentTransaction === 'check'){
        output.textContent = `📋 Customer Information\nName: ${customer.name}\nBalance: ${customer.balance} Baht`;
      }
    }

    // ===== Back to Menu =====
    function backToMenu() {
      document.getElementById("transactionPage").classList.add("hidden");
    }

  </script>
</body>
</html>
